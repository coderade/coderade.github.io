<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Ansible playbooks - Coderade blog</title>
        <meta name="author" content="Valdeci Gomes <valdeci@outlook.com>">
        <meta name="description" content="Ansible playbooks">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta property="og:locale" content="en_US">
        <meta property="og:url" content="https://coderade.github.io/post/devops/ansible-playbooks/">
        <meta property="og:title" content="Ansible playbooks">
        <meta property="og:site_name" content="coderade.github.com">
        <meta property="og:type" content="article" />
        <meta property="og:description" content="Ansible playbooks">
        <meta property="og:image" content="https://coderade.github.io/img/puralsight-bg.jpg">
        <meta property="og:image:type" content="image/jpeg">
        <meta property="og:image:width" content="800">
        <meta property="og:image:height" content="600">

        <meta name="generator" content="Hugo 0.47.1" />
        <link href="https://coderade.github.io/post/index.xml" rel="alternate" type="application/rss+xml" title="Coderade blog" />
        <link href="https://coderade.github.io/post/index.xml" rel="feed" type="application/rss+xml" title="Coderade blog" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://coderade.github.io/css/styles.css">
        <link rel="icon" href="https://coderade.github.io/favicon.ico">
        <link rel="apple-touch-icon" href="https://coderade.github.io/apple-touch-icon.png" />
        <link rel="stylesheet" href="https://coderade.github.io/css/highlightjs/monokai.css">
        <script src="https://coderade.github.io/js/vendor/modernizr-2.8.0.min.js"></script>
        
        <link rel="stylesheet" href="https://coderade.github.io/css/theme.css">
        
        <style>
        .site-header h2 .logo {
        background: url(https://coderade.github.io/img/puralsight-bg.jpg) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(https://coderade.github.io/img/puralsight-bg.jpg);
        }}
       .site-header {
         background: #2a373d url(https://coderade.github.io/img/puralsight-bg.jpg) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2>&lt;Coding, DevOps and Software Engineering tips/&gt;</h2>
          </div>
        </header>
        <nav class="nav-center" role="navigation">
    <div class="nav-wrapper navbar-info container">
        <ul>
            <li><a href="/">HOME</a></li>
            <li><a href="/about">ABOUT ME</a></li>
            <li><a href="/resume/valdeci-resume.pdf">MY Resume</a></li>
        </ul>
    </div>
</nav>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="https://coderade.github.io/" title="Back to home">&laquo; Back to home</a>
            
<h1><a href="https://coderade.github.io/post/devops/ansible-playbooks/" title="Ansible playbooks">Ansible playbooks</a></h1>

<footer class="post-info">Posted on <span class="post-meta"><time datetime="2016.08.28">2016.08.28</time>

    &middot; Tagged in
        
        <a href="https://coderade.github.io/tags/ansible">ansible</a>, 
        
        <a href="https://coderade.github.io/tags/devops">devops</a>
        
    

</span>
</footer>

            

<p>Ansible  is a task execution engine. It exists to provide a method for operators, engineers, developers or whomever, to easily define one or more actions to be performed on one or more computers.</p>

<p>This capability represents a step beyond simply just logging into each computer in question, and manually typing out the command.</p>

<p>These tasks can target the local system Ansible is running from, as well as other systems Ansible can reach over the network.</p>

<p>In this post I will show how to work with Ansible that  are one of the core features of Ansible which tell to Ansible what we want to execute.</p>

<h2 id="what-are-playbooks">What are Playbooks?</h2>

<p>Playbooks are YAML formatted files that collect one or more plays.</p>

<p>Plays are one or more tasks linked to the hosts that they are to be executed on.</p>

<p>Ansible playbook is the Ansible executable that is used to parse and execute the playbook with a provided inventory. To demonstrate playbooks, first I need to create an inventory. My inventory will just be a set of hosts in a couple of groups. Each host is uniquely named so that we can distinguish it in the output. In addition, we are going to define a variable for all the hosts that instructs Ansible to connect to these fake hosts locally. I&rsquo;ll need a playbook file, which I&rsquo;ll create with my text editor named demoplays.yaml. YAML files are simply text files, so any text editor will do. I happen to use Vim. After the traditional three dashes to indicate a YAML file, I&rsquo;ll create the first play. Plays require a name, a host pattern, and some tasks. I&rsquo;ll call this first play Do a demo. For a host pattern, I&rsquo;ll use the groupA set of hosts I just created. Next, I&rsquo;ll create a section for tasks. Like plays, tasks are expressed as a YAML list and each task should have a name. I&rsquo;ll give my first task a name of demo task one. Tasks require a module, and for demonstration purposes I&rsquo;ll make use of the debug module. The debug module can take a message argument to display provided text on the screen. I&rsquo;ll display this is task one. I&rsquo;ll duplicate this task for a second task, altering the name and the output string. Next, I&rsquo;ll add a second play with a similar name. Usings hosts from groupB, I&rsquo;ll copy all the tasks from the first play, and again, I&rsquo;ll alter the task names and the output strings to indicate their location in the file. First I&rsquo;ll copy this entire play. Change the name of the play to distinguish. Change the host to groupB. And change the task details to indicate that it&rsquo;s from the second play. Plays are executed from top to bottom and tasks are also executed from top to bottom So my play and task numbering will make sense. I&rsquo;m going to save my playbook and execute it to show the output. I need to tell Ansible playbook the inventory file to use and the playbook file to parse. Inventory is provided with the -i argument and the playbook is a freeform argument. Each play is displayed on screen and as each host completes each task, the result is displayed on screen as well. An implicit task is show, the setup task, which gathers facts about each host.</p>

            <ul class="share-buttons">
    <li>Share this article:</li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcoderade.github.io%2fpost%2fdevops%2fansible-playbooks%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook"></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Ansible%20playbooks&amp;url=https%3a%2f%2fcoderade.github.io%2fpost%2fdevops%2fansible-playbooks%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Tweet this article"></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=https%3a%2f%2fcoderade.github.io%2fpost%2fdevops%2fansible-playbooks%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google&#43;"></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcoderade.github.io%2fpost%2fdevops%2fansible-playbooks%2f&title=Ansible%20playbooks" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title="Share on Linkedin"></a>
    </li>
</ul>

        </article>
        <div class="comments">
            <h3>Comments</h3>
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "coderade" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </main>
    <aside class="author">
    <img class="profile-image" src="https://coderade.github.io/img/profile-image.jpg" alt="Valdeci Gomes" />
    <p class="name">by
        <strong>Valdeci Gomes</strong>
    </p>
    <p class="address">Curitiba, PR, Brazil</p>
    <p class="link"></p>
    <ul class="social">
        




<li><a href="//br.linkedin.com/in/valdeci/en" class="icon-linkedin" target="_blank" title="Linkedin"></a></li>









<li><a href="//github.com/coderade" class="icon-github" target="_blank" title="Github"></a></li>



<li><a href="//stackoverflow.com/users/4157589" class="icon-stackoverflow" target="_blank" title="StackOverflow"></a></li>



<li><a href="//stackexchange.com/users/5196485?tab=accounts" class="icon-stackexchange" target="_blank" title="stackExchange"></a></li>






<li><a href="https://coderade.github.io/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

    </ul>
    <br><br>
</aside>
    <aside class="author">
   <div class="tags">
      <h2><span>Categories</span></h2>
      <div class="widget-content cloud-label-widget-content">
         
         <span class="label-size label-size-4">
           <a href="/categories/android">Android</a>
         </span>
         
         <span class="label-size label-size-4">
           <a href="/categories/ansible">Ansible</a>
         </span>
         
         <span class="label-size label-size-4">
           <a href="/categories/aws">Aws</a>
         </span>
         
         <span class="label-size label-size-4">
           <a href="/categories/devops">Devops</a>
         </span>
         
         <span class="label-size label-size-4">
           <a href="/categories/es6">Es6</a>
         </span>
         
         <span class="label-size label-size-4">
           <a href="/categories/nodejs">Nodejs</a>
         </span>
         
         <span class="label-size label-size-4">
           <a href="/categories/rails">Rails</a>
         </span>
         
      </div>
   </div>
</aside>
<aside class="author">
   <div class="tags">
      <h2><span>Tags</span></h2>
      <div class="widget-content cloud-label-widget-content">
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/android">Android</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/ansible">Ansible</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/aws">Aws</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/devops">Devops</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/ec2">Ec2</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/es6">Es6</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/idea">Idea</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/js">Js</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/mobile">Mobile</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/nodejs">Nodejs</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/rails">Rails</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/ruby">Ruby</a>
         </span>
         
         <span class="label-size label-size-4">
           <a dir="ltr" href="/tags/web">Web</a>
         </span>
         
      </div>
   </div>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="https://coderade.github.io/post/index.xml" title="RSS"></a>
        <p>&copy; 2019 &middot; Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>.</p>
  </div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="https:\/\/coderade.github.io\/js\/vendor\/jquery-1.11.0.min.js"><\/script>')</script>
<script src="https://coderade.github.io/js/plugins.js"></script>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-106618202-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>

